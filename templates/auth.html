<!DOCTYPE html>
<html>
<head>
	<title> Registration </title>
		<meta charset="UTF-8">
	<title>Website</title>
	<link rel="stylesheet" href="../assets/css/auth.css">
	<script src='https://code.jquery.com/jquery-3.5.1.min.js'> </script>
      <!-- 
    - favicon link
  -->
  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml">

  <!-- 
    - custom css link
  -->
  <link rel="stylesheet" href="../assets/css/style.css">

  <!-- 
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&family=Poppins:wght@400;500;700&display=swap"
    rel="stylesheet">
</head>
<body>
	<div class="back">
	<div class="login-page">
	<div class="form">
			<form class="register-form" onsubmit="return validation()" action="sign.html">
				<div class="form-group">
				<input type="text" id="username" placeholder="Name">
				<span id="usererror" class="text-danger"></span>
				</div>
				<div class="form-group">
				<input type="text" id="surname" placeholder="Surname">
				<span id="surnameerror" class="text-danger"></span>
				</div>
				 <div class="form-group">
	            <input type="password" id="password" placeholder="password">
	            <span id="passworderror" class="text-danger"></span>
	        </div>
				<div class="form-group">
	            <input type="email" id="email" placeholder="email">
	            <span id="emailerror" class="text-danger"></span>
	            </div>
	            <div class="form-group">
	            <input type="text" id="phone" placeholder="Phone number"/>
	            <span id="mobileerror" class="text-danger"></span>
	            </div>
	            <button type="submit">Create</button>
	            <p class="message"> Already Registered? <a href="#"> Login </a>
	            </p>
	        </form>

	        <form class="login-form">
	        	<input type="text" id="logInEmail" placeholder="E-mail">
	        	<input type="password" id="logInPassword" placeholder="Password">
	        	<button form="" onclick="checkEmailLogIn()"> login </button>
	        	<p class="message"> Not Registered? <a href="#" > Register </a> </p>
            </form>
        </div>
    </div>
	<!--FOOTER-->
	<section class="empty">

	</section>
	<footer>

        <div class="footer-top">
          <div class="container">
    
            <div class="footer-brand-wrapper">
    
              <a href="#" class="logo">
                <img src="../assets/images/logo.svg" alt="GameX logo">
              </a>
    
              <div class="footer-menu-wrapper">
    
                <ul class="footer-menu-list">
    
                  <li>
                    <a href="#hero" class="footer-menu-link">Home</a>
                  </li>
    
                  <li>
                    <a href="#about" class="footer-menu-link">About</a>
                  </li>
    
                  <li>
                    <a href="#tournament" class="footer-menu-link">Tournament</a>
                  </li>
    
                  <li>
                    <a href="#team" class="footer-menu-link">Team</a>
                  </li>
    
                  <li>
                    <a href="#gears" class="footer-menu-link">Gears</a>
                  </li>
    
                  <li>
                    <a href="#" class="footer-menu-link">Contact</a>
                  </li>
    
                </ul>
    
                <div class="footer-input-wrapper">
                  <input type="text" name="message" required placeholder="Find Here Now" class="footer-input">
    
                  <button class="btn btn-primary">
                    <ion-icon name="search-outline"></ion-icon>
                  </button>
                </div>
    
              </div>
    
            </div>
    
            <div class="footer-quicklinks">
    
              <ul class="quicklink-list">
    
                <li>
                  <a href="#" class="quicklink-item">Faq</a>
                </li>
    
                <li>
                  <a href="#" class="quicklink-item">Help center</a>
                </li>
    
                <li>
                  <a href="#" class="quicklink-item">Terms of use</a>
                </li>
    
                <li>
                  <a href="#" class="quicklink-item">Privacy</a>
                </li>
    
              </ul>
    
              <ul class="footer-social-list">
    
                <li>
                  <a href="#" class="footer-social-link">
                    <ion-icon name="logo-discord"></ion-icon>
                  </a>
                </li>
    
                <li>
                  <a href="#" class="footer-social-link">
                    <ion-icon name="logo-twitch"></ion-icon>
                  </a>
                </li>
    
                <li>
                  <a href="#" class="footer-social-link">
                    <ion-icon name="logo-xbox"></ion-icon>
                  </a>
                </li>
    
                <li>
                  <a href="#" class="footer-social-link">
                    <ion-icon name="logo-youtube"></ion-icon>
                  </a>
                </li>
    
              </ul>
    
            </div>
    
          </div>
        </div>
    
        <div class="footer-bottom">
          <div class="container">
            <p class="copyright">
              Copyright &copy; 2022 <a href="#">codewithsadee</a>. all rights reserved
            </p>
    
            <figure class="footer-bottom-img">
              <img src="../assets/images/footer-bottom-img.png" alt="Online payment companies logo">
            </figure>
          </div>
        </div>
    
      </footer>	
    </div>

	
    <script type="text/javascript">
    		$('.message a').click(function(){
		$('form').animate({height: "toggle", opacity: "toggle" }, "medium");
		});


		function validation(){
	let username = document.getElementById("username").value;
	let password = document.getElementById("password").value;
	let surname = document.getElementById("surname").value;
	let phone = document.getElementById("phone").value;
	let email = document.getElementById("email").value;




	let usercheck = /^[A-Za-z. ]{3,20}$/g;
	let passwordcheck = /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,16}$/g;
	let surnamecheck = /^[A-Za-z. ]{3,20}/g;
	let emailcheck = /^[A-Za-z0-9_]{4,}@[A-Za-z]{2,}[.]{1}[A-Za-z.]{2,4}$/;
	let mobilecheck = /^(\+7|8)(\(?7\d{2}\)?)(\d{7}$)/;

	if(usercheck.test(username)){
		document.getElementById('usererror').innerHTML = " ";
			$("#username").css({"border":"2px solid green"});
	}
	else{
		document.getElementById('usererror').innerHTML = "**Username is Invalid";
		$("#username").css({"border":"2px solid red"});
		return false;
	}


	if(surnamecheck.test(surname)){
		document.getElementById('surnameerror').innerHTML = " ";
			$("#surname").css({"border":"2px solid green"});
	}
	else{
		document.getElementById('surnameerror').innerHTML = "**Surname is Invalid";
		$("#surname").css({"border":"2px solid red"});
		return false;
	}


	if(passwordcheck.test(password)){
	document.getElementById('passworderror').innerHTML = " ";
		$("#password").css({"border":"2px solid green"});
	}
	else{
		document.getElementById('passworderror').innerHTML = "**Password is Invalid(at least 8symbols)";
		$("#password").css({"border":"2px solid red"});
		return false;
	}


	if(emailcheck.test(email)){
	document.getElementById('emailerror').innerHTML = " ";
		$("#email").css({"border":"2px solid green"});
	}
	else{
		document.getElementById('emailerror').innerHTML = "**Uncorrect Email";
		$("#email").css({"border":"2px solid red"});
		return false;
	}


	if(mobilecheck.test(phone)){
	document.getElementById('mobileerror').innerHTML = " ";
		$("#mobile").css({"border":"2px solid green"});
	}
	else{
		document.getElementById('mobileerror').innerHTML = "**Uncorrect Mobile number";
		$("#mobile").css({"border":"2px solid red"});
		return false;
	}
	let Users = JSON.parse(localStorage.getItem('Users') || '[]');
	for(let i of Users){
		if(i.email == email){
			alert("This email already exists!");
			return;
		}
	}
	let user = {name: username, surname: surname, email: email,
		phone: phone, pass: password, ban: false, reas: ""};
	Users.push(user);
	localStorage.setItem('Users', JSON.stringify(Users));
}

function checkEmailLogIn() {
	let email = document.getElementById("logInEmail").value;
	let password = document.getElementById("logInPassword").value;
	let Users = JSON.parse(localStorage.getItem('Users') || '[]');
	if(email.length == 0 || password.length == 0) return;

	var Email = document.getElementById('logInEmail').value;
	var Pass = document.getElementById('logInPassword').value;
	if(("admin" == Email) && ("admin" == Pass)){
		window.location.href = 'admin.html';
		
	}else{
		for(let i of Users){
			if(i.email == email){
				if(i.pass != password){
					swal("", "Wrong password!", "error");
					document.getElementById('logInPassword').value = "";
					return;
				}
				else{
					if(i.ban){
						alert("Sorry, you were banned by the administrator." +
							"\nWhy?\n " + i.reas);
						return;
					}
					else {
						localStorage.setItem('lastUser', JSON.stringify(i));
						window.location.href = 'page1_1.html';
						return;
					}
				}
			}
		}
		swal("Oops...!", "You are not registered!", "error");
		document.getElementById('logInPassword').value = "";
	}
	
}

function checkUserLogInOut() {
	let lastUser = JSON.parse(localStorage.getItem('lastUser') || '[]');
	if(lastUser.length != 0){
		$('#checkUserLog').append('</id><a href="sign.html" onclick="clearUserLog()">Logout</a>');

	}
	else{
		$('#checkUserLog').append('<a href="sign.html">Sign</a>');
	}
}
function clearUserLog() {
	localStorage.setItem('lastUser', JSON.stringify([]));
}


    </script>
</body>

</html>
